from flask import Flask, render_template
import json, urllib2
from utils import watson, guardian

# object = urllib2.urlopen("https://content.guardianapis.com/search?api-key=b108bad9-9e7b-4afb-829b-1a9a19aef420")
# string = object.read()
# d = json.loads(string)
articleList = guardian.headlineEmotions()
print articleList
# articleList = [{'text': u'In recent days the UK\u2019s standing in the world has further diminished as the impacts of Brexit become more tangible.', 'tones': {u'Joy': 0.511253}}, {'text': u'Earlier this week the relocation of two EU agencies currently based in London was announced.', 'tones': {u'Analytical': 0.532616}}, {'text': u'The European Medicines Agency will move to Amsterdam, while the European Banking Authority will be lost to Paris, which narrowly pipped Dublin to host this prestigious organisation (London loses EU agencies to Paris and Amsterdam in Brexit relocation, 21 November).', 'tones': {'Neutral': 0}}, {'text': u'Between them, the two agencies employ 1,150 people, as well as attracting thousands of visiting researchers and staff members to London.', 'tones': {u'Analytical': 0.579367}}, {'text': u'This is despite Brexit secretary David Davis previously voicing his hope that the agencies could remain in London, or at least form part of the negotiations.', 'tones': {u'Analytical': 0.569129, u'Tentative': 0.867767}}, {'text': u'To add insult to injury, the UK will have to pay for the relocation.', 'tones': {u'Confident': 0.674728}}, {'text': u'In addition, the UK has withdrawn its candidate from election to the UN international court of justice (Report, 21 November).', 'tones': {u'Analytical': 0.599421, u'Sadness': 0.514217}}, {'text': u'Britain will not have a judge on the UN\u2019s most powerful court for the first time in its 71-year history.', 'tones': {'Neutral': 0}}, {'text': u'Last week, after five rounds of voting by the security council and the general assembly in New York, four judges from Brazil, Lebanon, France and Somalia were chosen for the bench ahead of the UK\u2019s candidate, Christopher Greenwood.', 'tones': {'Neutral': 0}}, {'text': u'The UK\u2019s failure to guarantee a place on the court of an organisation it helped to found is clearly a further sign of its increasing irrelevance on the world stage following the decision to leave the EU.', 'tones': {u'Analytical': 0.596608, u'Confident': 0.531584, u'Sadness': 0.705803}}, {'text': u'As the UK turns inwards following the Brexit vote, it is hardly a surprise that it is no longer able to command the global influence it once did.', 'tones': {'Neutral': 0}}, {'text': u'Alex Orr Edinburgh \u2022 The loss of the EMA and EBA will be keenly felt in Tower Hamlets, east London, as thousands of jobs leave the area.', 'tones': {u'Sadness': 0.707953}}, {'text': u'What no one seems to be talking about, though, is who will pick up the bill for the premises both organisations need to exit early.', 'tones': {u'Analytical': 0.762356, u'Tentative': 0.615352}}, {'text': u'The two are in offices in Canary Wharf \u2013 not cheap real estate \u2013 and signed long leases before the referendum was called.', 'tones': {'Neutral': 0}}, {'text': u'These will have exit clauses that carry significant cost, possibly millions, that will need to be carried by the taxpayer.', 'tones': {'Neutral': 0}}, {'text': u'It was ludicrous of David Davis to suggest these agencies could stay in London after Brexit.', 'tones': {u'Tentative': 0.798791}}, {'text': u'He probably hasn\u2019t even realised that he\u2019s got two extra bills to pick up now that these agencies are leaving, and two sets of regulatory frameworks to replace.', 'tones': {u'Analytical': 0.811849, u'Sadness': 0.71425, u'Tentative': 0.698904}}, {'text': u'Elaine Bagshaw London \u2022 Jonathan Powell portrays a bitterly divided country, facing self-inflicted impoverishment and the rapid loss of its remaining influence in the world (Brexit Britain has rendered itself irrelevant, 13 November).', 'tones': {u'Sadness': 0.559756}}, {'text': u'This is doubtless an accurate picture of our prospects \u2013 though the idea that Britain is less politically stable than Italy might be hard to swallow.', 'tones': {'Neutral': 0}}, {'text': u'But it also poses the question: who cares?', 'tones': {u'Analytical': 0.920855}}, {'text': u'Seventeen months after the referendum, and despite the growing mountain of evidence showing the scale of the disaster, the people who voted to leave the EU still want to leave.', 'tones': {u'Analytical': 0.561417, u'Sadness': 0.646245}}, {'text': u'Their only complaint is that Brexit isn\u2019t coming quick enough.', 'tones': {'Neutral': 0}}, {'text': u'It seems that Powell\u2019s dread that Britain faces international irrelevance doesn\u2019t bother them at all.', 'tones': {u'Fear': 0.570344, u'Sadness': 0.505148}}, {'text': u'It also seems that Britain\u2019s history as a beacon of democracy through two world wars and our ability, much prized by the nation\u2019s political elite, \u201cto punch above our weight\u201d, means little to people who feel ignored and deserted by the world.', 'tones': {u'Sadness': 0.588345}}, {'text': u'For them it\u2019s what the American sociologist Arlie Russell Hochschild has called \u201cdeep history\u201d that matters; not statistics or lectures from experts, but a feeling for what seems right and true.', 'tones': {'Neutral': 0}}, {'text': u'And that may well be a vision of Britain as a quiet little country, without global significance or aspirations, content to bob along on the ocean of history, putting what energy it has into keeping its head above water.', 'tones': {u'Joy': 0.616154, u'Tentative': 0.511119}}, {'text': u'Peter Lyth Southwell, Nottinghamshire \u2022 The EU divorce bill seems large because it attempts to quantify the present value of the cost of contingent liabilities on arbitrary assumptions about what liabilities might arise in the distant future (May seeks to unite cabinet behind higher divorce bill, 20 November).', 'tones': {u'Analytical': 0.515205, u'Tentative': 0.87177}}, {'text': u'This would be a non-issue if Britain simply agreed to accept the jurisdiction of the European court of justice, as some non-EU members already do, to settle disputes if they occur in future about these liabilities.', 'tones': {u'Analytical': 0.762356}}, {'text': u'SP Chakravarty Bangor, Gwynedd \u2022 Otto Inglis\u2019s letter listing Chinese overseas investments (21 November) points to yet another inconsistency of Tory party thinking.', 'tones': {'Neutral': 0}}, {'text': u'They boast about overseas investment in the UK as a sign of our strength.', 'tones': {'Neutral': 0}}, {'text': u'Yet China, and our own history, shows that it is the strong who invest in the weak for both economic return and political influence, and the weak who have to accept the interest of the strong.', 'tones': {u'Sadness': 0.50946}}, {'text': u'And all the time our flag-waving foreign secretary is widely regarded as a laughingstock.', 'tones': {u'Confident': 0.751512}}, {'text': u'Norman Gowar London \u2022 Like most of your readers, I voted against Brexit.', 'tones': {u'Tentative': 0.75152}}, {'text': u'But when I read the silly class prejudice and self-regard of many of the writers you chose to reflect on our leaving the EU (End of the affair, Review, 18 November), I\u2019m afraid it becomes ever more clear why it might have happened.', 'tones': {u'Fear': 0.801104}}, {'text': u'Andrew Hadfield Hove, Sussex \u2022 Join the debate \u2013 email guardian.letters@theguardian.com \u2022 Read more Guardian letters \u2013 click here to visit gu.com/letters', 'tones': {'Neutral': 0}}]

my_app = Flask(__name__)

@my_app.route('/')
def root():
    return render_template("page.html", articles = articleList)

if __name__ == "__main__":
    my_app.debug = True
    my_app.run()